<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Variables del Modelo - Tesis</title>
    <link rel="stylesheet" href="style/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Pantalla de carga -->
    <div id="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Cargando variables del modelo...</p>
        </div>
    </div>

    <header>
        <h1>Variables del Modelo Predictivo de Riesgo de Incendio</h1>
        <p>Descripción detallada de las variables utilizadas en el modelo</p>
        
        <!-- MENÚ DE NAVEGACIÓN -->
        <nav>
            <ul>
                <li><a href="../index.html"><i class="fas fa-fire"></i> Dashboard</a></li>
                <li><a href="variables.html" class="active"><i class="fas fa-chart-bar"></i> Variables</a></li>
            </ul>
        </nav>
    </header>

    <main class="dashboard">
        <div class="card text-card full-width-card">
            <div class="variable-header">
                <h3><i class="fas fa-list-ul"></i> Descripción de Variables del Modelo</h3>
                <div class="search-box">
                    <input type="text" id="variable-search" placeholder="Buscar variable...">
                    <i class="fas fa-search"></i>
                </div>
            </div>
            
            <p>Esta sección detalla todas las variables utilizadas para construir y entrenar el modelo predictivo de riesgo de incendios. Se dividen en:</p>
            
            <div class="variable-categories">
                <button class="category-btn active" data-category="all">Todas</button>
                <button class="category-btn" data-category="target">Variable Objetivo</button>
                <button class="category-btn" data-category="predictors">Variables Predictoras</button>
                <button class="category-btn" data-category="intermediate">Variables Intermedias</button>
            </div>

            <div class="table-wrapper">
                <table class="report-table" id="target-table">
                    <caption><i class="fas fa-bullseye"></i> Variable Objetivo (Target)</caption>
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Descripción</th>
                            <th>Tipo</th>
                            <th>Fuente de Datos</th>
                            <th>Valores Posibles</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="variable-row" data-category="target">
                            <td><strong><code>fire</code></strong></td>
                            <td>Indica si en un punto y fecha determinados ocurrió un incendio.</td>
                            <td><span class="badge binary">Binaria</span></td>
                            <td>
                                <div class="source-tag"><i class="fas fa-satellite-dish"></i> FIRMS (Positivos)</div>
                                <div class="source-tag"><i class="fas fa-random"></i> Muestreo aleatorio (Negativos)</div>
                            </td>
                            <td>
                                <span class="value-tag fire">1 (Incendio)</span>
                                <span class="value-tag no-fire">0 (No Incendio)</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="table-wrapper">
                <table class="report-table" id="predictors-table">
                    <caption><i class="fas fa-chart-line"></i> Variables Predictoras (Features)</caption>
                    <thead>
                        <tr>
                            <th>Categoría</th>
                            <th>Nombre</th>
                            <th>Descripción</th>
                            <th>Tipo</th>
                            <th>Fuente</th>
                            <th>Unidad / Ejemplo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="variable-row" data-category="predictors" data-subcategory="topographic">
                            <td rowspan="3" class="subcategory-label">Topográficas <i class="fas fa-mountain"></i></td>
                            <td><code>elevacion</code></td>
                            <td>Altura sobre el nivel del mar.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag"><i class="fas fa-map"></i> DEM</div></td>
                            <td>Metros (m)</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="topographic">
                            <td><code>pendiente</code></td>
                            <td>Inclinación del terreno; influye en la velocidad de propagación.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag">Derivado de DEM</div></td>
                            <td>Grados (°)</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="topographic">
                            <td><code>orientacion_cat</code></td>
                            <td>Dirección cardinal de la ladera (aspecto).</td>
                            <td><span class="badge categorical">Categórica</span></td>
                            <td><div class="source-tag">Derivado de DEM</div></td>
                            <td>N, NE, E, SE, etc.</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="landuse">
                            <td class="subcategory-label">Uso del Suelo <i class="fas fa-tree"></i></td>
                            <td><code>cobertura</code></td>
                            <td>Tipo de cobertura del suelo (bosque, pastizal, etc.).</td>
                            <td><span class="badge categorical">Categórica</span></td>
                            <td><div class="source-tag">Clasificación Cobertura</div></td>
                            <td>Códigos (3.0, 11.0)</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="vegetation">
                            <td class="subcategory-label">Vegetación <i class="fas fa-leaf"></i></td>
                            <td><code>ndvi</code></td>
                            <td>Índice de Vegetación de Diferencia Normalizada.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag"><i class="fas fa-cloud"></i> MODIS (vía GEE)</div></td>
                            <td>Rango: -1 a +1</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="meteorological">
                            <td rowspan="4" class="subcategory-label">Meteorológicas <i class="fas fa-cloud-sun"></i></td>
                            <td><code>temperature</code></td>
                            <td>Temperatura media diaria del aire.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag"><i class="fas fa-globe-europe"></i> ERA5 (vía GEE)</div></td>
                            <td>Grados Celsius (°C)</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="meteorological">
                            <td><code>precipitation</code></td>
                            <td>Precipitación total diaria.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag"><i class="fas fa-globe-europe"></i> ERA5 (vía GEE)</div></td>
                            <td>mm/día</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="meteorological">
                            <td><code>wind_speed</code></td>
                            <td>Velocidad media diaria del viento.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag"><i class="fas fa-globe-europe"></i> ERA5 (vía GEE)</div></td>
                            <td>m/s</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="meteorological">
                            <td><code>humidity</code></td>
                            <td>Humedad relativa media diaria del aire.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag"><i class="fas fa-globe-europe"></i> ERA5 (vía GEE)</div></td>
                            <td>Porcentaje (%)</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="proximity">
                            <td rowspan="2" class="subcategory-label">Proximidad <i class="fas fa-road"></i></td>
                            <td><code>dist_vias</code></td>
                            <td>Distancia a la vía principal más cercana.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag"><i class="fas fa-map-marked-alt"></i> Shapefile de Vías</div></td>
                            <td>Metros (m)</td>
                        </tr>
                        <tr class="variable-row" data-category="predictors" data-subcategory="proximity">
                            <td><code>dist_ciudades</code></td>
                            <td>Distancia al centro poblado más cercano.</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag"><i class="fas fa-city"></i> Shapefile de Ciudades</div></td>
                            <td>Metros (m)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="table-wrapper">
                <table class="report-table" id="intermediate-table">
                    <caption><i class="fas fa-cogs"></i> Variables Intermedias</caption>
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Descripción</th>
                            <th>Tipo</th>
                            <th>Fuente</th>
                            <th>Observaciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="variable-row" data-category="intermediate">
                            <td><code>geometry</code></td>
                            <td>Coordenada (Punto) de cada observación.</td>
                            <td><span class="badge geospatial">Geoespacial</span></td>
                            <td>
                                <div class="source-tag"><i class="fas fa-satellite-dish"></i> FIRMS</div>
                                <div class="source-tag"><i class="fas fa-random"></i> Muestreo</div>
                            </td>
                            <td>Usada para extraer valores de los rasters.</td>
                        </tr>
                        <tr class="variable-row" data-category="intermediate">
                            <td><code>date</code></td>
                            <td>Fecha de cada observación.</td>
                            <td><span class="badge datetime">Fecha/Hora</span></td>
                            <td>
                                <div class="source-tag"><i class="fas fa-satellite-dish"></i> FIRMS</div>
                                <div class="source-tag"><i class="fas fa-random"></i> Muestreo</div>
                            </td>
                            <td>Usada para enlazar con datos meteorológicos.</td>
                        </tr>
                        <tr class="variable-row" data-category="intermediate">
                            <td><code>orientacion</code></td>
                            <td>Orientación numérica en grados (0-360).</td>
                            <td><span class="badge numeric">Numérica</span></td>
                            <td><div class="source-tag">DEM (calculado)</div></td>
                            <td>Variable intermedia para crear <code>orientacion_cat</code>.</td>
                        </tr>
                        <tr class="variable-row" data-category="intermediate">
                            <td><code>zonas_inflamables_poligono</code></td>
                            <td>Polígono que define las áreas consideradas inflamables.</td>
                            <td><span class="badge geospatial">Geoespacial</span></td>
                            <td><div class="source-tag">Derivado de <code>cobertura</code></div></td>
                            <td>Usado para generar puntos de "No Incendio".</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </main>
    
    <footer>
        <p>Dashboard generado para proyecto de tesis - © <span id="current-year"></span></p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ocultar pantalla de carga
            setTimeout(() => {
                document.getElementById('loading-overlay').style.display = 'none';
                document.getElementById('current-year').textContent = new Date().getFullYear();
            }, 800);

            // Filtro de búsqueda
            const searchInput = document.getElementById('variable-search');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const rows = document.querySelectorAll('.variable-row');
                
                rows.forEach(row => {
                    const rowText = row.textContent.toLowerCase();
                    if (rowText.includes(searchTerm)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });

            // Filtro por categoría
            const categoryButtons = document.querySelectorAll('.category-btn');
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.dataset.category;
                    const rows = document.querySelectorAll('.variable-row');
                    
                    rows.forEach(row => {
                        if (category === 'all' || row.dataset.category === category) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    });
                });
            });

            // Resaltar filas al pasar el mouse
            const tableRows = document.querySelectorAll('.report-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = 'rgba(138, 63, 252, 0.1)';
                });
                
                row.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '';
                });
            });

            // Copiar nombre de variable al hacer clic
            const variableCells = document.querySelectorAll('td code');
            variableCells.forEach(cell => {
                cell.addEventListener('click', function() {
                    const textToCopy = this.textContent;
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        const originalText = this.textContent;
                        this.textContent = '¡Copiado!';
                        setTimeout(() => {
                            this.textContent = originalText;
                        }, 2000);
                    });
                });
                
                // Indicar que es clickeable
                cell.style.cursor = 'pointer';
                cell.title = 'Haz clic para copiar';
            });
        });
    </script>
</body>
</html>